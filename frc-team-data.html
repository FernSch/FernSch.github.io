<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>FRC Team Data Card Generator</title>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <h1>FRC Team Data Card Generator</h1>
    <h2>Generate a Data card for an FRC team, based on statbotics</h2>
    <form>
      <label for="team_num_data">Team Number:</label>
      <input type="text" id="team_num_data" name="team_num_data" required>
      <button type="submit">Submit</button>
    </form>
    <div id="team-data"></div>
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const teamNum = urlParams.get('team');

      if (!teamNum) {
        const errorDiv = document.createElement('div');
        errorDiv.textContent = 'You must pass in a team number through the URL in the format: FernSch.github.io/frc-team-data?team={team}';
        document.body.appendChild(errorDiv);
      } else {
        const apiUrl = `https://api.statbotics.io/v2/team/${teamNum}`;

        fetch(apiUrl)
          .then(response => response.json())
          .then(data => {
            const teamDataDiv = document.getElementById('team-data');
            const list = document.createElement('ul');

            for (const [key, value] of Object.entries(data)) {
              const listItem = document.createElement('li');
              const formattedKey = key.replace('_', ' ');
              listItem.textContent = `${formattedKey}: ${value}`;
              list.appendChild(listItem);
            }

            teamDataDiv.appendChild(list);
          })
          .catch(error => console.error(error));
      }
    </script>
  </body>
</html>
