<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>FRC Team Data Card Generator</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <h1>FRC Team Data Card Generator</h1>

    <script>
      // Get the value of the "team" variable from the URL
      const urlParams = new URLSearchParams(window.location.search);
      const teamNumber = urlParams.get('team');

      // If no team number is passed in through the URL, display a message
      if (!teamNumber) {
        const message = document.createElement("p");
        message.textContent = "Please provide a team number in the URL: FernSch.github.io/frc-team-data?team={team}";
        document.body.appendChild(message);
      } else {
        // Update the HTML with the team number
        const teamNumberSpan = document.createElement("span");
        teamNumberSpan.textContent = teamNumber;
        document.body.appendChild(document.createElement("h2").appendChild(document.createTextNode("Team ")).appendChild(teamNumberSpan).appendChild(document.createTextNode(" Information")));

        // Construct the API URL and fetch the team data
        const apiUrl = "https://api.statbotics.io/v2/team/";
        let url = apiUrl + teamNumber;

        // Check if the "year" variable is present in the URL
        const year = urlParams.get('year');
        if (year) {
          url += '/' + year;
        }

        fetch(url)
          .then(response => response.json())
          .then(data => {
            // Update the HTML with the team data
            const teamDataList = document.createElement("ul");
            document.body.appendChild(teamDataList);

            for (const [key, value] of Object.entries(data)) {
              const listItem = document.createElement("li");
              listItem.innerHTML = "<strong>" + key.replace("_", " ") + ":</strong> " + value;
              teamDataList.appendChild(listItem);
            }
          })
          .catch(error => {
            // Handle any errors that occurred during the fetch
            console.error(error);
          });
      }
    </script>
  </body>
</html>
