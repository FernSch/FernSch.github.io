<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>FRC Team Data Card Generator</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>
      #team-image {
        background-color: black;
        color: white;
        font-size: 2em;
        text-align: center;
        padding: 1em;
        width: 30%;
        margin: auto;
      }
    </style>
  </head>
  <body>
    <h1>FRC Team Data Card Generator</h1>
    <h2>Generate a Data card for an FRC team, based on statbotics</h2>
    <form id="team-form">
      <label for="team_num_data">Team Number:</label>
      <input type="text" id="team_num_data" name="team_num_data" required>
      <button type="submit">Submit</button>
    </form>
    <div id="team-data"></div>
    <div id="team-image"></div>
    <script>
      const form = document.getElementById('team-form');

      form.addEventListener('submit', (event) => {
        event.preventDefault();

        const teamNum = document.getElementById('team_num_data').value;
        const apiUrl = `https://api.statbotics.io/v2/team/${teamNum}`;

        fetch(apiUrl)
          .then(response => response.json())
          .then(data => {
            const teamDataDiv = document.getElementById('team-data');
            const list = document.createElement('ul');

            for (const [key, value] of Object.entries(data)) {
              const listItem = document.createElement('li');
              const formattedKey = key.replace('_', ' ');
              listItem.textContent = `${formattedKey}: ${value}`;
              list.appendChild(listItem);
            }

            teamDataDiv.innerHTML = '';
            teamDataDiv.appendChild(list);

            const teamImageDiv = document.getElementById('team-image');
            const teamName = data.team_name;
            const teamNumber = data.team_number;
            const country = data.country;
            const rookieYear = data.rookie_year;
            const fullWinRate = data.full_win_rate;
            const teamImage = document.createElement('div');
            teamImage.textContent = `${teamName} ${teamNumber}\n${country}, Rookie Year: ${rookieYear}, Full Win Rate: ${fullWinRate}`;
            teamImageDiv.innerHTML = '';
            teamImageDiv.appendChild(teamImage);
          })
          .catch(error => console.error(error));
      });
    </script>
  </body>
</html>
